<details>
  <summary>Gate Level Simulation (GLS)</summary>

# Gate-Level Simulation (GLS)

**Gate-Level Simulation (GLS)** is the process of verifying a digital design **after synthesis**, using the **gate-level netlist** generated by the synthesis tool.  
Unlike RTL simulation (which works with behavioural code), GLS runs on the **actual logic gates and interconnections**, making it closer to real hardware behaviour.

### Purpose of Gate-Level Simulation

- **Check Functional Equivalence**  
  Ensures the synthesised gate-level netlist behaves the same as the RTL design.

- **Validate Timing**  
  When combined with **SDF (Standard Delay Format)** files, GLS helps verify setup/hold times, as well as timing paths.

- **Verify Reset and Initialisation**  
  Confirms all flip-flops and registers are properly initialised after synthesis.

- **Detect Glitches and X-Propagation**  
  Helps identify unknown states (`X`), glitches, or hazards that may not appear in RTL simulations.


### Inputs Required
- **Gate-level netlist** – from synthesis (e.g., `design.synth.v`)  
- **SDF file** – for back-annotating timing delays  
- **Testbench** – same or slightly modified RTL testbench  
- **Standard cell libraries** – functional and timing models  

### How It Works
1. The **gate-level netlist** is simulated using tools like **Icarus Verilog**, **ModelSim**, or **VCS**.  
2. The **SDF file** is annotated to include real gate and wire delays.  
3. The simulator executes the **testbench** to validate timing and functionality.

### Advantages
- Ensures post-synthesis correctness.  
- Catches timing-related functional bugs.  
- Provides high confidence before layout and tapeout.

### Limitations
- Slower than RTL simulation due to gate-level detail.  
- Difficult debugging because of the netlist complexity.  
- May not perfectly represent post-layout parasitic effects (those are verified later with STA and post-layout simulation).


#### Synthesis 

```
yosys
read_verilog ./src/module/vsdbabysoc.v
```

<img width="933" height="86" alt="image" src="https://github.com/user-attachments/assets/321db736-1659-4290-a794-0e8b28090058" />

```
read_verilog -I ./src/include/ ./src/module/rvmyth.v
```
<img width="926" height="113" alt="image" src="https://github.com/user-attachments/assets/7ae1d4b6-6047-4fb4-a087-08dd43ff9129" />

```
read_verilog -I ./src/include/ ./src/module/clk_gate.v
```
<img width="917" height="83" alt="image" src="https://github.com/user-attachments/assets/39f55b94-d898-4cac-9ceb-276ac581d05c" />

```
read_liberty -lib ./src/lib/avsdpll.lib
read_liberty -lib ./src/lib/avsddac.lib
read_liberty -lib ./src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
```
<img width="926" height="171" alt="image" src="https://github.com/user-attachments/assets/ed27ca72-e2b5-4862-92ad-b77a3bcadca4" />

```
synth -top vsdbabysoc
```

| **Clock Gate** | **RVMYTH** | **VSDBabySoC** | **Design Hierarchy** |
|----------------|------------|----------------|----------------------|
| <img width="227" height="147" alt="clockgate" src="https://github.com/user-attachments/assets/c2e0fb56-8bd0-4ef0-beec-15f5eb4099a3" /> | <img width="224" height="304" alt="rvmyth" src="https://github.com/user-attachments/assets/a9cf19ec-3a6e-4369-8685-0b0419256621" /> | <img width="226" height="173" alt="vsdbabysoc" src="https://github.com/user-attachments/assets/16ac9661-0ab5-4be2-9605-b7dd47f494b0" /> | <img width="236" height="364" alt="design-hier" src="https://github.com/user-attachments/assets/ac254241-a53b-4c0e-b7b2-466ff23062a2" /> |


```
dfflibmap -liberty ~/VLSI/VSDBabySoC/src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
```
<img width="919" height="359" alt="image" src="https://github.com/user-attachments/assets/1c95146d-7c24-4d78-90b8-d8ce0c20cfd5" />

```
opt
```
<img width="927" height="359" alt="image" src="https://github.com/user-attachments/assets/5ed07f4b-a65f-4f75-8804-b55b19ac40d7" />

```
abc -liberty ./src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib -script +strash;scorr;ifraig;retime;{D};strash;dch,-f;map,-M,1,{D}
```
<img width="926" height="400" alt="image" src="https://github.com/user-attachments/assets/418ee250-7fec-4426-96c1-c9de4f15a98e" />

```
flatten
setundef -zero
clean -purge
rename -enumerate
```
<img width="928" height="182" alt="image" src="https://github.com/user-attachments/assets/2ead8890-553a-4783-8c51-222f5d8e4229" />

```
stat
```
<img width="274" height="374" alt="image" src="https://github.com/user-attachments/assets/79da2ba2-6b38-4629-95a6-8343962455b0" />
<img width="284" height="292" alt="image" src="https://github.com/user-attachments/assets/9b6a8a5b-7d18-4c7f-942f-a86bbfc2c075" />

```
write_verilog -noattr ./output/post_synth_sim/vsdbabysoc.synth.v
```
<img width="927" height="101" alt="image" src="https://github.com/user-attachments/assets/9c5dd8ed-bac2-45fd-9be4-d9a21bcca869" />


### Copy the required files for Gate-level Simulation

```
cd /home/venkatkamatham/Desktop/SoC/VSDBabySoC/src/module
cp -r ../../../../RTL/sky130RTLDesignAndSynthesisWorkshop/my_lib/verilog_model/primitives.v .
cp -r ../../../../RTL/sky130RTLDesignAndSynthesisWorkshop/my_lib/verilog_model/sky130_fd_sc_hd.v .
cp -r ../../output/post_synth_sim/vsdbabysoc.synth.v .
```

### Post-Synthesis Simulation

```
cd Desktop/SoC/VSDBabySoC/
iverilog -o ./output/post_synth_sim/post_synth_sim.out -DPOST_SYNTH_SIM -DFUNCTIONAL -DUNIT_DELAY=#1 -I ./src/include -I ./src/module ./src/module/testbench.v
```

<img width="928" height="47" alt="image" src="https://github.com/user-attachments/assets/8d9812ab-ad09-4b65-a11e-d089900f9c42" />

> To resolve this: Update the syntax in the file sky130_fd_sc_hd.v at or around line 74452.

Change:

> `endif SKY130_FD_SC_HD__LPFLOW_BLEEDER_FUNCTIONAL_V

To:

> `endif // SKY130_FD_SC_HD__LPFLOW_BLEEDER_FUNCTIONAL_V

<img width="926" height="425" alt="image" src="https://github.com/user-attachments/assets/67777a00-b9e3-44e1-89bc-62cc74f214a1" />

- waveform
  
<img width="926" height="428" alt="image" src="https://github.com/user-attachments/assets/5b086481-b392-46a2-8dc7-51f8534e0488" />


</details>

<details>
  <summary>Static Timing Analysis (STA)</summary>

# Static Timing Analysis (STA)
</details>


<details>
  <summary>OpenSTA Installation and Practical Example Analysis</summary>

# Installation of OpenSTA

```bash
sudo apt-get update
sudo apt-get install build-essential tcl-dev tk-dev cmake git libeigen3-dev autoconf m4 perl automake 

git clone https://github.com/The-OpenROAD-Project/OpenSTA.git
cd OpenSTA
mkdir build
cd build
cmake ..
```
- if any errors occur

```bash
cd
git clone https://github.com/ivmai/cudd.git
cd cudd
autoreconf -I
mkdir build
cd build
../configure --prefix=$HOME/cudd
make
make install
```
> CUDD is installed successfully

```bash
cd OpenSTA
cd build
cmake .. -DUSE_CUDD=ON -DCUDD_DIR=$HOME/cudd
make
sudo make install
sta
```
<img width="926" height="163" alt="image" src="https://github.com/user-attachments/assets/5a494ae0-a203-43fd-a008-b49a3c5e7331" />

## Example: Timing Analysis Using Commands

> Once you are in the OpenSTA interactive shell (indicated by the % prompt), you can execute the following commands to perform a basic static timing analysis:

```tcl
# Change to directory
cd OpenSTA/examples

# To invoke the tool
sta

# Load the standard cell timing library (Liberty format)
read_liberty ./nangate45_slow.lib.gz

# Load the gate-level Verilog netlist
read_verilog ./example1.v

# Link the top-level module with the loaded timing library
link_design top

# Define a 10 ns clock named 'clk' for inputs clk1, clk2, and clk3
create_clock -name clk -period 10 {clk1 clk2 clk3}

# Set input delay of 0 ns for signals in1 and in2 relative to clock 'clk'
set_input_delay -clock clk 0 {in1 in2}
```
<img width="926" height="173" alt="image" src="https://github.com/user-attachments/assets/6eecc46f-091a-440e-b41a-30b0b2e4f704" />

```tcl
# Generate a timing check report for the design
report_checks

or

report_checks -path_delay max
```
<img width="928" height="319" alt="image" src="https://github.com/user-attachments/assets/ae76cfc1-0db2-40d0-8056-58ea25430bc3" />

> report_check by default is setup/max checks

```tcl
report_checks -path_delay min

```
<img width="929" height="308" alt="image" src="https://github.com/user-attachments/assets/2167d039-8d2c-4395-83c5-dd363bc87c0d" />

> other command report_checks -path_delay min_max

- Design
  
```verilog
module top (in1, in2, clk1, clk2, clk3, out);
  input in1, in2, clk1, clk2, clk3;
  output out;
  wire r1q, r2q, u1z, u2z;

  DFF_X1 r1 (.D(in1), .CK(clk1), .Q(r1q));
  DFF_X1 r2 (.D(in2), .CK(clk2), .Q(r2q));
  BUF_X1 u1 (.A(r2q), .Z(u1z));
  AND2_X1 u2 (.A1(r1q), .A2(u1z), .ZN(u2z));
  DFF_X1 r3 (.D(u2z), .CK(clk3), .Q(out));
endmodule // top
```
- Synthesis
```tcl
cd /OpenSTA/examples/
yosys
read_liberty -lib nangate45_slow.lib.gz
read_verilog example1.v
synth -top top
```
<img width="926" height="245" alt="image" src="https://github.com/user-attachments/assets/d61f4834-ba1c-42ba-81a2-4d466a28ec69" />

```
show
```

<img width="926" height="170" alt="image" src="https://github.com/user-attachments/assets/c557017b-97d1-492f-bff6-11180f836141" />


<img width="926" height="427" alt="sta" src="https://github.com/user-attachments/assets/8352ac1e-e0a4-428d-b9c1-f14c22f7583f" />

```java
r2/Q (clock-to-Q)   = 0.23 ns                       Clock period        = 10 ns
u1 (BUF delay)      = 0.08 ns                       library setup time  = -0.16 ns
u2 (AND2 delay)     = 0.10 ns                       ---------------------------------
---------------------------------                   data required time  = 9.84 ns
Total arrival time  = 0.41 ns                       (trequired​=Tclk​−tsetup​)
(tarrival​=tclk_q​+tbuf​+tand​)

                                                  Slack Calculation
                                           ------------------------------------
                                            Slack = Required Time − Arrival Time 
                                            (Slacksetup​=trequired​−tarrival​)
                                            Slack = 9.84 − 0.41
                                                   = 9.43 ns (+ve MET)
                                           -------------------------------------
```

<img width="925" height="423" alt="sta_hold" src="https://github.com/user-attachments/assets/2580316d-a232-4f51-bff9-b3cc38f9e9d6" />

- For the hold check, we consider the shortest path
  
```java
Data arrival time = 0.00 ns (tarrivalmin​=tclk_q​+tcomb_min​)
Data required time = 0.01 ns (trequiredhold​=thold​)
-------------------------------------
Slack = Data arrival time − Data required time (Slackhold​=tarrivalmin​−trequiredhold​)
      =  0.00 − 0.01
      = −0.01 ns (VIOLATED)
-------------------------------------
```
> If Slack < 0, → Hold violation (data arrives too early)
> data arrives 10 ps too early, causing a hold violation

## SPEF-Based Timing Analysis

```tcl
# Change to the directory containing OpenSTA examples
cd OpenSTA/examples

# Invoke the OpenSTA tool
sta

# Load the standard cell timing library (Liberty format)
read_liberty ./nangate45_slow.lib.gz

# Load the gate-level Verilog netlist for analysis
read_verilog ./example1.v

# Link the top-level module in the Verilog netlist with the loaded timing library
link_design top

# Load the parasitic SPEF file for accurate delay calculation
read_spef ./example1.dspef

# Define a 10 ns clock named 'clk' for signals clk1, clk2, and clk3
create_clock -name clk -period 10 {clk1 clk2 clk3}

# Set input delay of 0 ns for signals in1 and in2 relative to the clock 'clk'
set_input_delay -clock clk 0 {in1 in2}
```

<img width="925" height="221" alt="image" src="https://github.com/user-attachments/assets/52456189-f659-4f5a-a011-290d59086695" />

```
# Generate a timing check report for the design
report_checks
```
<img width="926" height="326" alt="image" src="https://github.com/user-attachments/assets/2afabe16-e85c-472b-a782-f9e71dbbc98e" />

```
report_checks -path_delay min
```
<img width="926" height="300" alt="image" src="https://github.com/user-attachments/assets/4ac06f55-8307-4270-a1a6-d7cf529867d4" />


```
report_checks -digits 4 -fields capacitance
```
<img width="924" height="323" alt="image" src="https://github.com/user-attachments/assets/07014e8a-1a92-430b-868c-cff049675424" />

```
report_checks -digits 4 -fields [list capacitance slew input_pins fanout]
```
<img width="928" height="350" alt="image" src="https://github.com/user-attachments/assets/be972b0a-9623-400a-ada8-bfa7d4089296" />

```
report_power
```
<img width="928" height="155" alt="image" src="https://github.com/user-attachments/assets/538796b5-7d82-4487-959c-191dd81b9e7c" />

```
report_pulse_width_checks
```
<img width="926" height="119" alt="image" src="https://github.com/user-attachments/assets/513bc772-3c02-4891-b1aa-634f1bce0715" />

```
report_units
```
<img width="930" height="107" alt="image" src="https://github.com/user-attachments/assets/8fba9221-1ee7-49c2-90e5-94560198a9ad" />


### Timing Report Comparison: Without SPEF vs With SPEF

| Node / Signal               | Without SPEF Delay / Time (ns) | With SPEF Delay / Time (ns) |
|------------------------------|-------------------------------|----------------------------|
| clock clk (rise edge)        | 0.00 / 0.00                   | 0.00 / 0.00                |
| clock network delay (ideal)  | 0.00 / 0.00                   | 0.00 / 0.00                |
| ^ r2/CK (DFF_X1)             | 0.00 / 0.00                   | 0.00 / 0.00                |
| r2/Q (DFF_X1)                | 0.23 / 0.23                   | 2.58 / 2.58                |
| u1/Z (BUF_X1)                | 0.08 / 0.31                   | 2.58 / 5.16                |
| u2/ZN (AND2_X1)              | 0.10 / 0.41                   | 2.75 / 7.91                |
| r3/D (DFF_X1)                | 0.00 / 0.41                   | 0.00 / 7.92                |
| Data Arrival Time             | 0.41                            | 7.92                       |
| clock clk (rise edge)         | 10.00 / 10.00                 | 10.00 / 10.00              |
| clock network delay (ideal)   | 0.00 / 10.00                  | 0.00 / 10.00               |
| clock reconvergence pessimism | 0.00 / 10.00                  | 0.00 / 10.00               |
| r3/CK (DFF_X1)               | 10.00 / 10.00                 | 10.00 / 10.00              |
| Library Setup Time            | -0.16 / 9.84                  | -0.57 / 9.43               |
| Data Required Time            | 9.84                            | 9.43                       |
| Slack                        | 9.43 (MET)                     | 1.52 (MET)                 |


#### Observations

- **Without SPEF**: Only library cell delays are considered → **smaller path delays**, **larger slack**.  
- **With SPEF**: Includes parasitic RC delays → **larger path delays**, **smaller slack**.  
- SPEF-based slack is closer to real post-route timing and is critical for **final timing verification**.

## Timing Analysis Using Scripts

### Min_Max Delay Calculation using script

```
read_liberty -max nangate45_slow.lib.gz
read_liberty -min nangate45_fast.lib.gz
read_verilog example1.v
link_design top
create_clock -name clk -period 10 {clk1 clk2 clk3}
set_input_delay -clock clk 0 {in1 in2}
report_checks -path_delay min_max
```

- Load the file to run the STA analysis

```
sta
source min_max_delays.tcl
```
<img width="1852" height="809" alt="image" src="https://github.com/user-attachments/assets/4e9bfe76-6dce-43ee-a105-a5c617d7c5b2" />
<img width="925" height="311" alt="image" src="https://github.com/user-attachments/assets/18da13ef-50b2-467d-a6fd-0d10631ddce2" />

### Multi-Corners 

```
# multi_corner.tcl
# 3 corners with +/-10% derating example

define_corners ss tt ff

read_liberty -corner ss nangate45_slow.lib.gz
read_liberty -corner tt nangate45_typ.lib.gz
read_liberty -corner ff nangate45_fast.lib.gz

read_verilog example1.v
link_design top

set_timing_derate -early 0.9
set_timing_derate -late 1.1

create_clock -name clk -period 10 {clk1 clk2 clk3}
set_input_delay -clock clk 0 {in1 in2}

# Report all corners
report_checks -path_delay min_max

# Report typical corner
report_checks -corner tt

```

- Load the file to run the STA analysis
```
sta
source multi_corner.tcl
```
<img width="925" height="320" alt="image" src="https://github.com/user-attachments/assets/bb53d6d9-b110-48a0-be75-cd2ae7a50902" />
<img width="921" height="320" alt="image" src="https://github.com/user-attachments/assets/6399e2b9-16d5-4fbe-abe0-5c48b170f76c" />
<img width="1863" height="668" alt="image" src="https://github.com/user-attachments/assets/1ec62094-ae5f-470a-8d52-1adaf584cc41" />

```
report_checks -corner ff
```
<img width="928" height="331" alt="image" src="https://github.com/user-attachments/assets/18604205-1e41-4d12-a97f-377a87179e3c" />


## References

https://github.com/The-OpenROAD-Project/OpenSTA.git

https://github.com/ivmai/cudd.git

</details>

<details>
  <summary>Timing Analysis of VSDBabySoC design using OpenSTA</summary>

# Timing Analysis of VSDBabySoC design using OpenSTA

```tcl

cd Desktop/SoC/VSDBabySoC

sta

# Load Liberty Libraries (standard cell + IPs)
read_liberty  ./src/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
read_liberty  ./src/lib/avsdpll.lib
read_liberty ./src/lib/avsddac.lib

# Read Synthesized Netlist
read_verilog ./src/module/vsdbabysoc.synth.v

# Link the Top-Level Design
link_design vsdbabysoc

# Apply SDC Constraints
read_sdc ./src/sdc/vsdbabysoc_synthesis.sdc
```

- SDC Constraints
```sdc
set_units -time ns
create_clock [get_pins {pll/CLK}] -name clk -period 11
```

<img width="924" height="253" alt="image" src="https://github.com/user-attachments/assets/9eef44aa-1acf-4d25-ab55-c917487f9c07" />

```
# Generate Timing Report
report_checks
```

<img width="923" height="319" alt="image" src="https://github.com/user-attachments/assets/2d1e547e-d86a-449a-881e-00ba8de3d152" />

```
report_checks -path_delay min
```
<img width="929" height="307" alt="image" src="https://github.com/user-attachments/assets/1e528851-ee7b-4219-ae11-8b576d8bc537" />

### 

```
# =============================================================================
# SDC Constraints for vsdbabysoc Module (synthesized netlist)
# Generated for OpenSTA Static Timing Analysis
# Clock period: 11 ns (~90.9 MHz)
# =============================================================================

# ---------------------------------------------------------------------------
# Time Units
# ---------------------------------------------------------------------------
set_units -time ns
# Sets the default time unit to nanoseconds. All timing values (delays, periods) are in ns.

# ---------------------------------------------------------------------------
# Clock Definition
# ---------------------------------------------------------------------------
create_clock -name clk -period 11 [get_pins pll/CLK]
# Creates a clock named "clk" with a period of 11 ns (~90.9 MHz) using the top-level clock port "CLK".

# Clock latency and uncertainty
set_clock_latency -source 2 [get_clocks clk]
# 2 ns source latency
set_clock_latency 1 [get_clocks clk]
# 1 ns internal latency
set_clock_uncertainty -setup 0.5 [get_clocks clk]
set_clock_uncertainty -hold 0.5 [get_clocks clk]
# Clock setup and hold uncertainties

# ---------------------------------------------------------------------------
# Design Constraints
# ---------------------------------------------------------------------------
set_max_area 8000
# Maximum total cell area
set_max_fanout 5 vsdbabysoc
# Maximum fanout per cell
set_max_transition 10 vsdbabysoc
# Maximum signal transition (rise/fall)

# ---------------------------------------------------------------------------
# Input Port Constraints
# ---------------------------------------------------------------------------
set_input_delay -clock clk -max 4 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]
set_input_delay -clock clk -min 1 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]
set_input_transition -max 0.4 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]
set_input_transition -min 0.1 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]
# Input arrival times and slew constraints

# ---------------------------------------------------------------------------
# Output Port Constraints
# ---------------------------------------------------------------------------
set_load -max 0.5 [get_ports OUT]
set_load -min 0.5 [get_ports OUT]
set_output_delay -clock clk -max 0.5 -clock clk [get_ports OUT]
set_output_delay -clock clk -min 0.5 -clock clk [get_ports OUT]
# Output load and clock-to-output delay constraints

# ---------------------------------------------------------------------------
# Path Delay Constraints
# ---------------------------------------------------------------------------
set_max_delay 10 -from [get_clocks clk] -to [get_ports OUT]
# Maximum clock-to-output path delay ≤ 10 ns

# =============================================================================
# End of SDC
# =============================================================================

```

- Setup and Hold reports

```
report_checks
```
<img width="1849" height="657" alt="image" src="https://github.com/user-attachments/assets/66b56dee-423b-4604-84c9-865c59fa57fa" />


```
report_checks -path_type min
```
<img width="925" height="314" alt="image" src="https://github.com/user-attachments/assets/bfd4447d-381b-4673-b499-f034dd25ab7a" />



</details>

<details>
  <summary>Multi-PVT Corner Timing Analysis of VSDBabySoC using OpenSTA</summary>

  
# Multi-PVT Corner Timing Analysis of VSDBabySoC using OpenSTA

## What Are Multi-PVT Corners in STA

**Multi-PVT (Process, Voltage, Temperature) analysis** is a crucial step in Static Timing Analysis (STA) to ensure a digital design meets its timing requirements under all possible manufacturing and environmental conditions.

In real silicon, circuit behaviour changes due to:
- **Process variation (P)**: Differences in transistor manufacturing cause cells to behave faster or slower [e.g., fast-fast (FF), typical-typical (TT), slow-slow (SS)].
- **Voltage variation (V)**: Supply voltage can vary (e.g., 1.95 V, 1.80 V, 1.40 V), affecting switching speeds.
- **Temperature variation (T)**: Performance changes with temperature (e.g., -40 °C, 25 °C, 100 °C).
> Each combination of these parameters forms a PVT corner — a specific operating condition under which the design’s timing must be validated.

### Why Multi-PVT Analysis Is Important

1. Ensures the design meets setup and hold timing across all real-world conditions.
2. Detects worst-case scenarios that might not appear at typical corners.
3. Guarantees robust performance and manufacturability across chip batches.

For example:
- FF @ -40 °C, 1.95 V → Fast corner → Checks hold violations (data arrives too early).
- SS @ 100 °C, 1.40 V → Slow corner → Checks setup violations (data arrives too late).

### How the Multi-PVT Script Helps

The provided `multi_pvt_corners.tcl`script automates STA across multiple .lib timing models (each representing one PVT corner).
For each corner, it:

1. Loads the specific timing library (e.g., sky130_fd_sc_hd__ss_100C_1v40.lib)
2. Links the synthesised netlist
3. Applies the same SDC constraints
4. Runs timing checks (setup, hold, WNS, TNS)
5. Saves detailed reports under ./sta_outputs/
> This ensures comprehensive timing validation across all operating conditions in a fully automated flow.

## Timing Libraries

Timing libraries required for this analysis can be downloaded from:

**[SkyWater PDK – sky130_fd_sc_hd Timing Libraries](https://github.com/efabless/skywater-pdk-libs-sky130_fd_sc_hd/tree/master/timing)**


- Script to Download All Library Files

```
#!/usr/bin/env tclsh

# List of .lib files to download
set files {
    sky130_fd_sc_hd__ff_100C_1v65.lib
    sky130_fd_sc_hd__ff_100C_1v95.lib
    sky130_fd_sc_hd__ff_n40C_1v56.lib
    sky130_fd_sc_hd__ff_n40C_1v65.lib
    sky130_fd_sc_hd__ff_n40C_1v76.lib
    sky130_fd_sc_hd__ff_n40C_1v95.lib
    sky130_fd_sc_hd__ss_100C_1v40.lib
    sky130_fd_sc_hd__ss_100C_1v60.lib
    sky130_fd_sc_hd__ss_n40C_1v28.lib
    sky130_fd_sc_hd__ss_n40C_1v35.lib
    sky130_fd_sc_hd__ss_n40C_1v40.lib
    sky130_fd_sc_hd__ss_n40C_1v44.lib
    sky130_fd_sc_hd__ss_n40C_1v76.lib
    sky130_fd_sc_hd__ss_n40C_1v60.lib 
    sky130_fd_sc_hd__tt_025C_1v80.lib
    sky130_fd_sc_hd__tt_100C_1v80.lib
}

# Base URL for the raw files
set base_url "https://github.com/efabless/skywater-pdk-libs-sky130_fd_sc_hd/raw/master/timing"

# Use existing folder 'lib'
cd lib

# Download each file (always overwrite)
foreach file $files {
    puts "Downloading $file..."
    if {[catch {exec wget -O $file --quiet --show-progress $base_url/$file} err]} {
        puts "Failed to download $file: $err" 
    } else {
        puts "Finished downloading $file"
    }
}

puts "\n All downloads complete!"

```
- Grant execute permission and run the TCL script to download all PVT corner library files.
  
```
chmod 777 pvt_corners_download.tcl
tclsh pvt_corners_download.tcl
```

<img width="929" height="169" alt="image" src="https://github.com/user-attachments/assets/f2c68f4b-f80e-4848-94ce-70b4c3d55b26" />

- Script to Run Static Timing Analysis (STA) for All PVT Corners

```
#---------------------------------------------
#  Multi-corner STA Automation Script (OpenSTA)
#---------------------------------------------

# Define list of timing libraries (corners)
set list_of_lib_files {
    sky130_fd_sc_hd__ff_n40C_1v95.lib
    sky130_fd_sc_hd__ff_100C_1v65.lib
    sky130_fd_sc_hd__ff_100C_1v95.lib
    sky130_fd_sc_hd__ff_n40C_1v56.lib
    sky130_fd_sc_hd__ff_n40C_1v65.lib
    sky130_fd_sc_hd__ff_n40C_1v76.lib
    sky130_fd_sc_hd__ss_100C_1v40.lib
    sky130_fd_sc_hd__ss_100C_1v60.lib
    sky130_fd_sc_hd__ss_n40C_1v28.lib
    sky130_fd_sc_hd__ss_n40C_1v35.lib
    sky130_fd_sc_hd__ss_n40C_1v40.lib
    sky130_fd_sc_hd__ss_n40C_1v44.lib
    sky130_fd_sc_hd__ss_n40C_1v76.lib
    sky130_fd_sc_hd__ss_n40C_1v60.lib
    sky130_fd_sc_hd__tt_025C_1v80.lib
    sky130_fd_sc_hd__tt_100C_1v80.lib
}

#---------------------------------------------
#  Load base cell libraries and design files
#---------------------------------------------
read_liberty ./src/lib/avsdpll.lib
read_liberty ./src/lib/avsddac.lib

#---------------------------------------------
#  Create output folder
#---------------------------------------------
file mkdir sta_outputs

#---------------------------------------------
#  Loop through each .lib file (corner)
#---------------------------------------------
set i 1
foreach lib_file $list_of_lib_files {

    puts "\n=== Running STA for corner: $lib_file ==="

    # Load corner-specific library
    read_liberty ./src/lib/$lib_file

    # Read design and constraints
    read_verilog ./src/module/vsdbabysoc.synth.v
    link_design vsdbabysoc
    current_design vsdbabysoc
    read_sdc ./src/sdc/updated_synth.sdc

    # Perform timing checks
    check_setup -verbose

    #-----------------------------------------
    # Generate detailed reports
    #-----------------------------------------
    report_checks \
        -path_delay min_max \
        -fields {nets cap slew input_pins fanout} \
        -digits 4 \
        > ./sta_outputs/min_max_$lib_file.txt

    #-----------------------------------------
    # Save key metrics (WNS, TNS)
    #-----------------------------------------
    exec echo "$lib_file" >> ./sta_outputs/sta_worst_max_slack.txt
    report_worst_slack -max -digits 4 >> ./sta_outputs/sta_worst_max_slack.txt

    exec echo "$lib_file" >> ./sta_outputs/sta_worst_min_slack.txt
    report_worst_slack -min -digits 4 >> ./sta_outputs/sta_worst_min_slack.txt

    exec echo "$lib_file" >> ./sta_outputs/sta_tns.txt
    report_tns -digits 4 >> ./sta_outputs/sta_tns.txt

    exec echo "$lib_file" >> ./sta_outputs/sta_wns.txt
    report_wns -digits 4 >> ./sta_outputs/sta_wns.txt

    incr i
}
puts "\n All corners analysed. Reports saved in ./sta_outputs/"
```

- SDC file

```
# =============================================================================
# SDC Constraints for vsdbabysoc Module (synthesised netlist)
# Generated for OpenSTA Static Timing Analysis
# Clock period: 11 ns (~90.9 MHz)
# =============================================================================

set_units -time ns

# Clock definition
create_clock -name clk -period 11 [get_pins pll/CLK]

set_clock_latency -source 2 [get_clocks clk]
set_clock_latency 1 [get_clocks clk]
set_clock_uncertainty -setup 0.5 [get_clocks clk]
set_clock_uncertainty -hold 0.5 [get_clocks clk]

# Design constraints
set_max_area 8000
set_max_fanout 5 vsdbabysoc
set_max_transition 10 vsdbabysoc

# Input constraints
set_input_delay -clock clk -max 4 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]
set_input_delay -clock clk -min 1 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]
set_input_transition -max 0.4 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]
set_input_transition -min 0.1 [get_ports {reset VCO_IN ENb_CP ENb_VCO REF VREFH}]

# Output constraints
set_load -max 0.5 [get_ports OUT]
set_load -min 0.5 [get_ports OUT]
set_output_delay -clock clk -max 0.5 -clock clk [get_ports OUT]
set_output_delay -clock clk -min 0.5 -clock clk [get_ports OUT]

# Path delay
set_max_delay 10 -from [get_clocks clk] -to [get_ports OUT]
```

<img width="928" height="426" alt="image" src="https://github.com/user-attachments/assets/9b0f5fe7-041c-4a1d-91b1-89c9a9b19c57" />


## References

https://github.com/spatha0011/spatha_vsd-hdp/tree/main/Day7

https://github.com/arunkpv/vsd-hdp/blob/main/docs/Day_19.md

</details>

